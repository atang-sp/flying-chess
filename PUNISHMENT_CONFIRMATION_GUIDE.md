# 惩罚确认页面用户引导功能

## 功能概述

为惩罚组合确认页面添加了专门的用户引导功能，帮助用户了解如何查看、管理和确认生成的惩罚组合。

## 引导内容

### 1. 惩罚组合确认

- **位置**: `.modal-header`
- **内容**: 说明这是惩罚组合确认页面，系统已生成惩罚组合

### 2. 组合列表

- **位置**: `.combinations-list`
- **内容**: 介绍组合列表区域，显示所有生成的惩罚组合详情

### 3. 组合详情

- **位置**: `.combination-item:first-child .combination-details`
- **内容**: 解释每个组合的详细信息：工具强度、部位耐受度、惩罚描述

### 4. 删除或恢复操作

- **位置**: `.combination-item:first-child .combination-actions`
- **内容**: 说明如何删除不合适的组合以及如何恢复已删除的组合

### 5. 统计信息

- **位置**: `.combination-stats`
- **内容**: 介绍统计信息，显示总数、删除数和保留数

### 6. 操作按钮

- **位置**: `.modal-actions`
- **内容**: 说明重新生成、返回设置、确认组合等操作

## 触发机制

### 自动触发

- 当惩罚确认弹窗显示时（`showPunishmentConfirmation.value = true`）
- 自动检测并在500ms后显示引导
- 只在首次访问时显示（基于 `hasShownGuide` 状态管理）

### 手动触发

- 点击右下角的 "❓ 帮助" 按钮
- 系统会优先检测惩罚确认弹窗是否显示，如果显示则调用确认页面引导

## 测试步骤

### 测试自动引导

1. **清空缓存**（可选）
   - 在首页点击 "🧹 清空缓存" 按钮
   - 确保能体验完整的首次引导流程

2. **进入惩罚设置**
   - 点击 "开始游戏"
   - 完成棋盘设置，点击 "下一步"
   - 进入惩罚设置页面

3. **配置惩罚参数**
   - 选择惩罚工具、身体部位、受罚姿势
   - 设置惩罚次数范围
   - 点击 "开始游戏" 按钮

4. **观察自动引导**
   - 系统会生成惩罚组合并显示确认弹窗
   - 应该在500ms后自动显示用户引导
   - 引导会依次介绍6个主要功能区域

### 测试手动引导

1. **再次进入确认页面**
   - 按照上述步骤重新进入惩罚确认页面
   - 由于已显示过自动引导，不会再次自动显示

2. **手动触发引导**
   - 点击右下角的 "❓ 帮助" 按钮
   - 系统应该检测到确认弹窗并显示对应引导

### 测试引导交互

1. **浏览所有步骤**
   - 点击 "下一步" 按钮浏览所有引导步骤
   - 确认每个步骤的定位和内容正确

2. **测试导航功能**
   - 使用 "上一步" 按钮回到之前的步骤
   - 点击 "完成" 按钮结束引导

3. **测试关闭功能**
   - 点击引导弹窗的关闭按钮（X）
   - 确认引导可以正常关闭

## 技术实现

### 代码位置

- 引导函数: `startPunishmentConfirmationGuide()` in `src/App.vue`
- 监听器: `watch(() => showPunishmentConfirmation.value, ...)`
- 触发逻辑: `showAutoGuide('punishment_confirmation')`

### CSS选择器

- `.modal-header`: 弹窗头部
- `.combinations-list`: 组合列表区域
- `.combination-item:first-child .combination-details`: 第一个组合的详情
- `.combination-item:first-child .combination-actions`: 第一个组合的操作按钮
- `.combination-stats`: 统计信息区域
- `.modal-actions`: 底部操作按钮

### 状态管理

- `hasShownGuide.add('punishment_confirmation')`: 记录已显示引导
- `autoGuideEnabled.value`: 控制是否启用自动引导
- localStorage持久化存储引导状态

## 注意事项

1. **引导优先级**: 当确认弹窗显示时，手动点击帮助按钮会优先显示确认页面引导
2. **延迟时间**: 自动引导延迟500ms显示，确保弹窗完全渲染
3. **状态同步**: 引导状态与其他页面共享，支持统一的设置管理
4. **响应式兼容**: 引导内容在移动端和桌面端都能正常显示

## 后续优化建议

1. **添加更多交互提示**: 可以在引导中增加实际操作演示
2. **个性化引导**: 根据用户配置的复杂程度调整引导内容
3. **上下文感知**: 根据生成的组合数量和类型调整引导重点
4. **多语言支持**: 为引导内容添加国际化支持
