# 🔲 二维码导入导出使用指南

## 📖 功能概述

飞行棋游戏支持通过二维码分享和导入游戏配置，让你可以轻松与朋友分享自定义的游戏设置。

## 🚀 如何使用

### 📤 导出配置为二维码

1. **打开导出功能**
   - 在游戏界面右下角点击 `📤 导出` 按钮
   - 或在设置页面找到导出选项

2. **选择要导出的配置**
   - ✅ **玩家设置**：玩家数量和姓名
   - ✅ **惩罚配置**：工具、部位、姿势等设置
   - ✅ **棋盘配置**：各种格子的数量分布
   - ✅ **机关配置**：自定义机关效果
   - ✅ **棋盘内容**：完整的棋盘布局（包含随机种子）

3. **生成二维码**
   - 点击 `🔲 生成二维码` 按钮
   - 系统会显示二维码预览
   - 可以保存图片或直接分享

4. **下载二维码图片**
   - 点击 `📄 导出 JSON` 下载配置文件
   - 或右键保存二维码图片

### 📥 导入二维码配置

1. **打开导入功能**
   - 在导出对话框中切换到 `导入` 标签页

2. **选择导入方式**

   **方式1：文件上传**
   - 点击 `选择JSON文件或二维码图片`
   - 选择之前保存的二维码图片或JSON文件
   - 系统会自动识别并导入

   **方式2：文本粘贴**
   - 将配置数据粘贴到文本框中
   - 点击 `导入配置` 按钮

3. **确认导入**
   - 系统会验证配置数据
   - 自动备份当前配置
   - 应用新的配置设置

## ⚙️ 技术规格

### 二维码标准

- **标准**：QR Code
- **版本**：自动选择（Version 1-40）
- **最大容量**：约2953字符
- **图片格式**：PNG
- **图片尺寸**：512x512像素

### 错误纠正级别

- **大数据** (>1500字符)：L级别 (~7% 错误纠正)
- **中等数据**：M级别 (~15% 错误纠正)
- **小数据** (<500字符)：H级别 (~30% 错误纠正)

### 支持的数据格式

```json
{
  "version": "1.0.0",
  "exportedAt": "2025-07-21T12:00:00.000Z",
  "gameTitle": "飞行棋配置",
  "description": "游戏配置导出文件",
  "data": {
    "playerSettings": { ... },
    "punishmentConfig": { ... },
    "boardConfig": { ... },
    "trapConfig": [ ... ],
    "boardContent": { ... }
  }
}
```

## 💡 使用建议

### 数据大小优化

- **推荐**：只导出必要的配置项
- **避免**：同时导出所有配置（可能超出二维码容量）
- **建议**：大量数据使用JSON文件导出

### 分享最佳实践

1. **基础配置**：只导出玩家设置+棋盘配置
2. **完整配置**：导出所有设置但不包含棋盘内容
3. **特定布局**：只导出棋盘内容用于分享特定布局

### 故障排除

**二维码无法识别？**

- 确保图片清晰，没有模糊或变形
- 尝试调整手机摄像头距离
- 检查图片是否完整，没有被裁剪

**导入失败？**

- 检查二维码是否是本游戏生成的
- 确认配置数据格式正确
- 查看浏览器控制台的错误信息

**数据太大？**

- 减少导出的配置项
- 使用JSON文件导出代替二维码
- 分别导出不同的配置部分

## 🔧 开发者信息

### 使用的库

- **qrcode** (^1.5.4)：二维码生成
- **qr-scanner** (^1.4.2)：二维码解析

### 核心函数

- `exportToQRCode()` - 导出为二维码
- `importFromQRCode()` - 从二维码导入
- `generateQRCode()` - 生成二维码图片
- `parseQRCodeWithQrScanner()` - 解析二维码

### 配置选项

```typescript
interface QRCodeOptions {
  errorCorrectionLevel: 'L' | 'M' | 'Q' | 'H'
  type: 'image/png' | 'image/jpeg' | 'image/webp'
  quality: number // 0-1
  margin: number
  color: { dark: string; light: string }
  width: number
}
```

## 📞 技术支持

如果遇到问题，请：

1. 检查浏览器控制台的错误信息
2. 确认使用的是最新版本的游戏
3. 尝试使用不同的浏览器
4. 联系开发者获取帮助

---

_最后更新：2025-07-21_
