# 🎲 飞行棋游戏

一个基于Vue 3 + TypeScript的飞行棋游戏，支持惩罚机制和多种游戏模式。

## ✨ 新功能

### 🏷️ 版本管理系统
- **版本显示**: 在游戏界面右下角显示当前版本号
- **开发标识**: 开发环境显示 `vdev` 并带有红色标识
- **自动替换**: 构建时自动替换版本号占位符
- **Git Tag 支持**: 支持通过 Git Tag 自动设置版本号
- **构建时间**: 显示应用构建时间

### 🎯 增强的3D骰子效果
- **3D立体效果**: 骰子具有真实的3D立体感，包含阴影、高光和深度效果
- **延长动画**: 骰子滚动动画延长至3秒，提供更沉浸的体验
- **多轴旋转**: 骰子在X、Y、Z三个轴上同时旋转，模拟真实骰子
- **缩放效果**: 滚动过程中骰子会有缩放变化，增强视觉冲击力

### 📱 摇动手机掷骰子
- **摇动检测**: 支持通过摇动手机来掷骰子
- **权限管理**: 自动请求设备运动权限
- **智能触发**: 需要连续摇动3次才触发，避免误操作
- **冷却机制**: 摇动功能有1秒冷却时间，防止频繁触发
- **开关控制**: 可以随时开启/关闭摇动功能

## 🚀 功能特性

### 游戏核心
- 🎲 3D骰子系统，支持点击和摇动两种操作方式
- 🎯 40格蛇形棋盘布局
- 👥 支持1-4名玩家轮流游戏
- 🎮 多种特殊格子类型

### 惩罚系统
- ⚡ 惩罚格子：触发各种惩罚机制
- 🎁 奖励格子：前进或获得特殊效果
- ⬅️ 特殊格子：后退、休息、回到起点
- 🔄 动态惩罚：根据骰子点数或玩家选择
- 🔢 惩罚次数范围：可设置最小和最大惩罚次数（默认5-20次）

### 惩罚工具
- 🖐️ 手掌 (强度: 1)
- 📏 尺子 (强度: 2)
- 🪵 木板 (强度: 3)
- 🎋 藤条 (强度: 4)
- 🏓 拍子 (强度: 5)

### 身体部位
- 🍑 屁股 (敏感度: 5) - 耐受性最高
- 🦵 大腿 (敏感度: 3) - 中等耐受性
- 🤲 手心 (敏感度: 1) - 最敏感

### 受罚姿势
- 🧍 站立 (难度: 1)
- 🧱 手扶墙 (难度: 2)
- 🪑 趴在桌子上 (难度: 3)
- 🦵 手抓膝盖 (难度: 4)
- 🧎 跪趴 (难度: 5)

## 🏷️ 版本管理

### 开发版本

在开发环境中，版本号显示为 `dev`，并带有特殊的开发标识。

### 生产版本

#### 方法一：使用 package.json 版本

```bash
# 更新 package.json 中的版本号
npm version patch  # 0.0.0 -> 0.0.1
npm version minor  # 0.0.1 -> 0.1.0
npm version major  # 0.1.0 -> 1.0.0

# 构建项目
npm run build
```

#### 方法二：使用 Git Tag（推荐）

```bash
# 1. 创建并推送 tag
git tag v1.0.0
git push origin v1.0.0

# 2. 使用 tag 构建
npm run build:tag
```

这个命令会：
- 自动检测当前的 git tag
- 更新 package.json 版本号
- 使用 tag 版本进行构建
- 在应用中显示正确的版本号

### 版本显示

版本号会显示在游戏界面的右下角：
- 开发环境：显示 `vdev` 并带有红色 `dev` 标识
- 生产环境：显示实际的版本号（如 `v1.0.0`）

## 🛠️ 技术栈

- **前端框架**: Vue 3 + TypeScript
- **构建工具**: Vite
- **样式**: CSS3 + 3D变换
- **设备API**: DeviceMotion API (摇动检测)
- **版本管理**: 自定义 Vite 插件

## 📱 移动端支持

- **响应式设计**: 适配各种屏幕尺寸
- **触摸优化**: 优化的触摸交互体验
- **摇动功能**: 支持摇动手机掷骰子
- **权限管理**: 自动处理设备运动权限

## 🎮 游戏玩法

1. **开始游戏**: 点击"开始游戏"按钮
2. **掷骰子**: 
   - 点击骰子或"投骰子"按钮
   - 摇动手机（需要先开启摇动功能）
3. **移动棋子**: 根据骰子点数在棋盘上移动
4. **触发效果**: 根据所在格子类型执行相应操作
5. **完成惩罚**: 按照配置执行惩罚内容
6. **继续游戏**: 轮到下一个玩家

## 🔧 安装和运行

```bash
# 安装依赖
npm install

# 启动开发服务器
npm run dev

# 构建生产版本
npm run build

# 使用 Git Tag 构建
npm run build:tag

# 预览生产版本
npm run preview
```

## 📋 使用说明

### 摇动功能使用
1. 点击"开启摇动"按钮
2. 允许设备运动权限（如果提示）
3. 摇动手机3次即可掷骰子
4. 可以随时关闭摇动功能

### 游戏配置
- 在`src/config/gameConfig.ts`中可以调整游戏参数
- 修改骰子动画持续时间
- 调整惩罚格子配置
- 自定义工具和部位设置
- 设置惩罚次数范围（最小和最大次数）

## 🎨 自定义

### 骰子动画
- 在`src/components/Dice.vue`中修改动画效果
- 调整3D变换参数
- 自定义摇动检测阈值

### 游戏配置
- 修改棋盘布局
- 调整惩罚内容
- 自定义特殊格子效果

## 📄 许可证

MIT License

## 🤝 贡献

欢迎提交Issue和Pull Request来改进这个项目！

---

享受游戏！🎲✨
