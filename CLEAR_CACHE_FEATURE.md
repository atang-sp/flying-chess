# 清空缓存功能说明

## 功能概述

在游戏首页添加了"清空缓存"功能，让用户可以方便地重置所有本地存储的数据，从而重新体验引导功能。

## 功能位置

- **位置**：游戏首页（IntroPage）
- **位置描述**：在"开始游戏"按钮下方，游戏信息区域的底部

## 功能特性

### 1. 清空缓存按钮

- **外观**：红色渐变按钮，带有🧹图标
- **文字**："清空缓存"
- **提示**：悬停时显示"清空所有缓存数据，重新触发引导"
- **动画**：悬停时有轻微上升效果

### 2. 清空的数据

点击按钮会清空以下localStorage数据：

- `hasShownGuide` - 已显示过的引导记录
- `autoGuideEnabled` - 自动引导开关状态
- `playerSettings` - 玩家设置缓存
- `gameConfig` - 游戏配置缓存

### 3. 成功提示

- **样式**：绿色半透明背景的Toast提示
- **位置**：页面顶部中央
- **内容**："✅ 缓存已清空！引导将重新触发"
- **持续时间**：3秒后自动消失
- **动画**：从上方滑入的效果

### 4. 操作提示

- **提示文字**："清空后可重新体验引导功能"
- **样式**：小字体，半透明显示
- **位置**：清空缓存按钮下方

## 使用方法

### 重新体验引导的步骤

1. **在首页点击"清空缓存"按钮**
   - 会看到绿色的成功提示
   - 控制台会输出"缓存已清空，引导将重新触发"

2. **刷新页面或重新访问**
   - 引导功能会重新激活
   - 自动引导开关恢复为默认状态（开启）

3. **导航到任意页面**
   - 首次访问的页面会重新触发自动引导

### 快速测试引导功能

```
清空缓存 → 刷新页面 → 自动弹出引导
```

## 技术实现

### 清空缓存函数

```typescript
const clearCache = () => {
  try {
    // 清空localStorage中的引导相关数据
    localStorage.removeItem('hasShownGuide')
    localStorage.removeItem('autoGuideEnabled')

    // 清空玩家设置缓存
    localStorage.removeItem('playerSettings')

    // 清空游戏配置缓存
    localStorage.removeItem('gameConfig')

    // 显示成功提示
    showClearSuccess.value = true

    // 3秒后隐藏提示
    setTimeout(() => {
      showClearSuccess.value = false
    }, 3000)

    console.log('缓存已清空，引导将重新触发')
  } catch (error) {
    console.error('清空缓存时出错:', error)
  }
}
```

### 样式特点

- **响应式设计**：适配桌面端和移动端
- **视觉一致性**：与游戏整体风格保持一致
- **用户体验**：清晰的视觉反馈和状态提示
- **无障碍支持**：包含hover提示和键盘可访问

## 与引导系统的集成

### 引导重置原理

1. **状态记忆清除**：清空`hasShownGuide`让所有页面重新视为"首次访问"
2. **开关重置**：清空`autoGuideEnabled`恢复自动引导默认状态
3. **完整重置**：清空所有相关配置，确保完全重新开始

### 兼容性

- **向后兼容**：即使localStorage中没有相关数据也不会报错
- **容错处理**：包含try-catch错误处理机制
- **调试支持**：在控制台输出操作结果

## 使用场景

### 1. 开发测试

- 开发人员测试引导功能
- 验证不同页面的引导效果
- 调试引导触发逻辑

### 2. 用户重新体验

- 用户想重新查看引导教程
- 忘记了某个功能的使用方法
- 向他人展示游戏功能

### 3. 问题排查

- 引导功能异常时的快速重置
- 清除可能损坏的缓存数据
- 恢复到初始状态

## 注意事项

### 数据丢失警告

⚠️ **重要**：点击"清空缓存"会清除以下用户数据：

- 玩家自定义的昵称设置
- 游戏的个性化配置
- 引导的显示偏好

### 建议操作

- 仅在需要重新体验引导时使用
- 清空后需要重新设置个人偏好
- 适合新用户学习或功能演示

## 未来扩展

- 添加选择性清空功能（只清空引导相关数据）
- 增加确认对话框防止误操作
- 支持导出/导入配置功能
- 添加数据清空的详细日志
