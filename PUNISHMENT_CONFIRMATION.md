# 惩罚组合确认功能

## 功能概述

在生成惩罚项目后，系统会显示所有生成的惩罚组合，让玩家确认并可以删除不合适的组合。

## 功能特点

### 1. 自动生成惩罚组合
- 根据当前配置的工具、部位、姿势和比例自动生成惩罚组合
- 生成数量与棋盘上的惩罚格子数量相匹配
- 确保工具强度不超过部位耐受度

### 2. 组合确认界面
- 显示所有生成的惩罚组合
- 每个组合包含：工具、部位、姿势、次数和完整描述
- 显示工具强度、部位耐受度、姿势难度等详细信息

### 3. 组合管理
- 支持删除不合适的惩罚组合
- 支持恢复已删除的组合
- 实时显示总组合数、已删除数、保留组合数

### 4. 重新生成
- 支持重新生成所有惩罚组合
- 清除所有删除标记，重新开始选择

## 使用流程

1. **进入设置页面**
   - 从游戏说明页面点击"下一步：设置惩罚"

2. **配置惩罚设置**
   - 调整工具、部位、姿势的比例
   - 设置最大惩罚次数
   - 添加或删除自定义项目

3. **生成惩罚组合**
   - 点击"生成惩罚组合"按钮
   - 系统根据配置生成26个惩罚组合（对应棋盘上的26个惩罚格子）

4. **确认组合**
   - 查看所有生成的惩罚组合
   - 删除不合适的组合（点击🗑️按钮）
   - 可以恢复已删除的组合（点击🔄按钮）
   - 点击"确认组合"继续

5. **开始游戏**
   - 确认组合后，点击"开始游戏"
   - 棋盘上的惩罚格子将使用确认的组合

## 技术实现

### 组件结构
- `PunishmentConfirmation.vue` - 惩罚组合确认弹窗组件
- `GameService.generatePunishmentCombinations()` - 生成多个惩罚组合
- `GameService.updateBoardWithConfirmedCombinations()` - 根据确认的组合更新棋盘

### 状态管理
- `showPunishmentConfirmation` - 控制确认弹窗显示
- `punishmentCombinations` - 存储生成的惩罚组合
- `removedCombinations` - 跟踪已删除的组合

### 响应式设计
- 支持桌面端和移动端
- 自适应布局，在不同屏幕尺寸下都有良好的显示效果

## 配置说明

### 惩罚格子数量
- 普通惩罚格子：14个
- 动态惩罚格子：12个
- 总计：26个惩罚格子

### 动态惩罚类型
- `dice_multiplier` - 骰子倍数惩罚
- `previous_player` - 上一个玩家受罚
- `next_player` - 下一个玩家受罚
- `other_player_choice` - 其他玩家选择数量

## 注意事项

1. 必须至少保留一个惩罚组合才能开始游戏
2. 删除的组合不会影响游戏平衡，系统会重新分配
3. 动态惩罚格子会保持其特殊效果，只更新工具、部位、姿势和基础次数
4. 重新生成会清除所有删除标记，需要重新选择 